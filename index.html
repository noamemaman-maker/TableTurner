<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TableTurner • Real-Time Wait Times</title>
  <style>
    :root{
      --cream:#F7F4EC;
      --brown:#8B6B4A;
      --gold:#E3C777;
      --green:#213C2B;
      --green-acc:#2E5B3C;
      --muted:#6E7A6F;
      --danger:#B84A4A;
      --warning:#C9871F;
      --ok:#2F8F64;
      --card:#FFFFFF;
      --shadow:0 8px 24px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background:linear-gradient(180deg,var(--cream),#fff 40%);
      color:#20231F;
    }
    header{ position:sticky; top:0; z-index:10; background:rgba(255,255,255,.8); backdrop-filter: blur(8px); border-bottom:1px solid #eee; }
    .container{max-width:1100px; margin:0 auto; padding: 1rem 1.25rem}
    .hero{ display:grid; gap:1rem; align-items:center; grid-template-columns: 1.3fr .7fr; padding:1.25rem 0 0.5rem; }
    .brand{ display:flex; align-items:center; gap:.75rem; }
    .logo{ width:42px; height:42px; border-radius:10px; background: radial-gradient(circle at 30% 30%, var(--gold), #b9904a); box-shadow: var(--shadow); display:grid; place-items:center; color:#fff; font-weight:800; }
    h1{ margin:0; font-size:clamp(1.25rem, 2vw + 1rem, 2rem); color:var(--green);} 
    .tag{ color:var(--muted); font-weight:500 }

    .card{ background:var(--card); border:1px solid #eee; border-radius:18px; box-shadow: var(--shadow); }
    .hero-left{ padding:1.25rem; }
    .metrics{ display:grid; grid-template-columns: repeat(3,1fr); gap:.75rem; margin-top:1rem; }
    .metric{ padding:.85rem; border-radius:14px; border:1px dashed #e8e4db; background:#fff; }
    .metric h3{ margin:.15rem 0; font-size:1.35rem; color:var(--green) }
    .metric small{ color:var(--muted) }

    .hero-right{ padding:1.25rem; display:grid; place-items:center }
    .occ-wrap{ display:grid; place-items:center }
    .occ-label{ margin-top:.35rem; font-weight:600; color:var(--green) }
    svg.progress{ width:160px; height:160px; }
    .progress text{ font-weight:800; fill:var(--green) }

    .grid{ display:grid; gap:1rem; grid-template-columns: 1.2fr .8fr; margin:1rem 0 2rem; }
    .section{ padding:1rem }

    table{ width:100%; border-collapse: collapse; }
    th, td{ text-align:left; padding:.75rem; border-bottom:1px solid #eee }
    thead th{ font-size:.9rem; letter-spacing:.02em; color:#fff; background:var(--green); padding:.6rem .75rem }
    tbody tr:hover{ background:#f3f1eb }
    .pill{ display:inline-flex; align-items:center; gap:.4rem; padding:.3rem .6rem; border-radius:999px; font-size:.82rem; border:1px solid #eee; }

    form{ display:grid; gap:.65rem; grid-template-columns: 1fr 1fr; }
    form .full{ grid-column: 1/-1 }
    label{ font-size:.9rem; color:var(--muted) }
    input, select{ width:100%; padding:.65rem .7rem; border:1px solid #e7e2d8; border-radius:12px; outline:none; }
    button{ appearance:none; border:0; background:var(--green); color:#fff; padding:.75rem 1rem; border-radius:12px; font-weight:700; cursor:pointer; transition: transform .05s ease; }
    button:active{ transform: translateY(1px) }
    .ghost{ background:#fff; color:var(--green); border:1px solid #e5e5e5 }

    .toolbar{ display:flex; justify-content:space-between; align-items:center; margin:.25rem 0 1rem }
    .toggle{ display:inline-grid; grid-auto-flow:column; gap:.35rem; align-items:center; }
    .toggle input{ width:40px; height:22px; appearance:none; background:#e5e5e5; border-radius:999px; position:relative; outline:none; transition: background .2s ease }
    .toggle input:checked{ background:var(--green-acc) }
    .toggle input::after{ content:""; width:18px; height:18px; border-radius:50%; background:#fff; position:absolute; top:2px; left:2px; transition:left .2s ease }
    .toggle input:checked::after{ left:20px }

    .admin{ display:none }
    .admin.active{ display:block }
    .admin-grid{ display:grid; grid-template-columns: 1fr; gap:.75rem }
    .admin-tile{ padding:.8rem; border-radius:14px; border:1px solid #eee; background:#fff; }
    .admin-row{ display:flex; justify-content:space-between; align-items:center; gap:.5rem; padding:.5rem 0; border-bottom:1px dashed #eee }
    .admin-row:last-child{ border-bottom:0 }

    .hint{ color:var(--muted); font-size:.9rem }
    .status-dot{ width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:.4rem }

    @media (max-width: 960px){
      .hero{ grid-template-columns: 1fr; }
      .grid{ grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <div class="logo">TT</div>
        <div>
          <h1>TableTurner</h1>
          <div class="tag">Skip the line — see your wait time in real time</div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="card hero-left">
        <div class="toolbar">
          <div class="hint">Live status updates every minute</div>
          <label class="toggle" title="Toggle staff view">
            <span class="hint">Staff view</span>
            <input type="checkbox" id="staffToggle"/>
          </label>
        </div>
        <h2 class="h1-hero" style="margin:.25rem 0 0; font-size:clamp(1.6rem, 2.6vw + .6rem, 3rem); color:var(--green); font-weight:800;">Skip the line — see your wait time in real time</h2>
        <div class="hint" style="margin:.25rem 0 1rem 0; text-align:left">Know exactly when your table will be ready</div>
        <div class="metrics">
          <div class="metric">
            <small>Tables Seated</small>
            <h3 id="occupancyText">—</h3>
            <small id="occupancySub" class="hint">—</small>
          </div>
          <div class="metric">
            <small>Average Wait (All Parties)</small>
            <h3 id="avgWait">—</h3>
          </div>
          <div class="metric" id="nextTableMetric">
            <small>Next Table Ready</small>
            <h3 id="nextReady">—</h3>
            <small id="nextReadySub" class="hint">—</small>
          </div>
        </div>
      </div>
      <div class="card hero-right">
        <div class="occ-wrap">
          <svg class="progress" viewBox="0 0 120 120" aria-label="Occupancy meter">
            <circle cx="60" cy="60" r="52" stroke="#eee" stroke-width="10" fill="none"/>
            <circle id="occArc" cx="60" cy="60" r="52" stroke="var(--green-acc)" stroke-linecap="round" stroke-width="10" fill="none" transform="rotate(-90 60 60)" stroke-dasharray="327" stroke-dashoffset="327" style="transition: stroke-dashoffset .6s ease"/>
            <text x="60" y="60" text-anchor="middle" dominant-baseline="central" font-size="22" id="occPct">0%</text>
          </svg>
          <div class="occ-label" id="occLabel">Low occupancy</div>
        </div>
      </div>
    </section>

    <section class="grid">
      <div class="card section">
        <h2 style="margin:0 0 .5rem 0; color:var(--green)">Live Waitlist</h2>
        <table>
          <thead>
            <tr id="waitlistHeadRow">
              <th>Name</th>
              <th>Party Size</th>
              <th>Added</th>
              <th>Estimated Wait</th>
            </tr>
          </thead>
          <tbody id="waitlistRows"></tbody>
        </table>
        <div class="hint" style="margin-top:.5rem">Estimates adjust continuously based on live table turnover.</div>
      </div>

      <div class="card section">
        <h2 style="margin:0 0 .5rem 0; color:var(--green)">Join the Waitlist</h2>
        <form id="joinForm">
          <div>
            <label for="guestName">Name</label>
            <input id="guestName" required placeholder="First & last"/>
          </div>
          <div>
            <label for="guestContact">Phone or Email</label>
            <input id="guestContact" required placeholder="(555) 555-1234 or you@domain.com"/>
          </div>
          <div>
            <label for="partySize">Party Size</label>
            <select id="partySize">
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4" selected>4</option>
              <option value="5">5</option>
              <option value="6">6</option>
            </select>
          </div>
          <div class="full">
            <button type="submit">Add to Waitlist</button>
          </div>
        </form>
      </div>
    </section>

    <section class="card section admin" id="admin">
      <div class="toolbar">
        <h2 style="margin:0; color:var(--green)">Host Dashboard</h2>
        <div class="hint">Manage tables & upcoming ready times</div>
      </div>
      <div class="admin-grid">
        <div class="admin-tile">
          <strong>Overview</strong>
          <div id="adminOverview" class="hint" style="margin-top:.35rem">—</div>
        </div>
        <div class="admin-tile">
          <strong>Tables</strong>
          <div id="tablesList"></div>
        </div>
        <div class="admin-tile">
          <strong>Upcoming Ready Times (next 45 min)</strong>
          <div id="upcomingList" class="hint"></div>
        </div>
      </div>
    </section>

    <div id="toast" style="position:fixed; bottom:16px; left:50%; transform:translateX(-50%); background:#1F3D2B; color:#fff; padding:.65rem .9rem; border-radius:10px; box-shadow:var(--shadow); opacity:0; transition:opacity .3s ease">—</div>
  </main>

  <script>
    // ------------------------------
    // Data & utilities
    // ------------------------------
    const MIN_MS = 60000;
    const CLEANING_BUFFER_MIN = 4;

    const rand = (min, max) => Math.floor(Math.random()*(max-min+1))+min;
    const clamp = (n,min,max) => Math.max(min,Math.min(max,n));
    const fmtTime = (d)=> d.toLocaleTimeString([], {hour:'numeric', minute:'2-digit'});

    const ICON = {
      users: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>',
      table: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 10h18"></path><path d="M12 10v11"></path><path d="M6 10v11"></path><path d="M18 10v11"></path><rect x="3" y="4" width="18" height="6" rx="1"/></svg>',
      clock: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>'
    };

    // Seed 8 tables (2,2,2,4,4,4,6,6)
    const tables = Array.from({length: 8}, (_,i)=>{
      const size = [2,2,2,4,4,4,6,6][i%8] || 4;
      const avgTurn = (size<=2? 45 : size<=4? 60 : 75);
      const seatedAgoMin = Math.random()<.6 ? rand(1, avgTurn-5) : null;
      return {
        table_id: i+1,
        size,
        avg_turn_time: avgTurn,
        cleaning_buffer: CLEANING_BUFFER_MIN,
        seated_at: seatedAgoMin? new Date(Date.now()-seatedAgoMin*MIN_MS) : null,
        seated_party: null,
      };
    });

    let waitlist = [
      {name:'Ava R.', contact:'ava@example.com', size:2, addedAt:new Date(Date.now()-rand(2,10)*MIN_MS)},
      {name:'Chen L.', contact:'(212) 555-1800', size:4, addedAt:new Date(Date.now()-rand(3,15)*MIN_MS)},
      {name:'Sanjay P.', contact:'sanjay@mail.com', size:3, addedAt:new Date(Date.now()-rand(1,6)*MIN_MS)},
    ];

    // ------------------------------
    // Seating rules (exact match by default)
    // ------------------------------
    function targetTableSize(partySize){
      if (partySize <= 2) return 2;
      if (partySize <= 4) return 4;
      return 6; // 5–6 tops
    }
    function canSeat(partySize, tableSize, allowFlex){
      const want = targetTableSize(partySize);
      return allowFlex ? (tableSize >= want) : (tableSize === want);
    }
    function seatPartyAtTable(party, table, allowFlex=false){
      if (!canSeat(party.size, table.size, allowFlex)) {
        toast('Cannot seat this party at this table');
        return false;
      }
      table.seated_at = new Date();                // real-time anchor (no drift)
      table.seated_party = { name: party.name, size: party.size };
      return true;
    }

    // ------------------------------
    // Core timing
    // ------------------------------
    function remainingDiningMin(table){
      if(!table.seated_at) return 0;
      const elapsed = (Date.now() - new Date(table.seated_at).getTime())/MIN_MS;
      return clamp(Math.ceil(table.avg_turn_time - elapsed), 0, 999);
    }
    function expectedFreeTime(table){
      if(!table.seated_at) return new Date();
      const end = new Date(new Date(table.seated_at).getTime() + table.avg_turn_time*MIN_MS);
      return end;
    }
    function estimateWaitForParty(size){
      const target = targetTableSize(size);
      const now = Date.now();
      const candidates = tables.filter(t => t.size === target);
      if (candidates.length === 0){
        return { minutes: 0, freeAt: new Date(now), tableSize: target };
      }
      const withTimes = candidates.map(t => {
        if (!t.seated_at){ return { t, freeAt: new Date(now) }; }
        const diningEnds = expectedFreeTime(t).getTime();
        const freeAtMs = diningEnds + t.cleaning_buffer*MIN_MS;
        return { t, freeAt: new Date(freeAtMs) };
      });
      const soonest = withTimes.sort((a,b)=> a.freeAt - b.freeAt)[0];
      const minutes = Math.max(0, Math.round((soonest.freeAt.getTime() - now)/MIN_MS));
      return { minutes, freeAt: soonest.freeAt, tableSize: target };
    }

    // ------------------------------
    // System info
    // ------------------------------
    function occupancyInfo(){
      const total = tables.length;
      const seated = tables.filter(t=>t.seated_at).length;
      const pct = Math.round((seated/total)*100);
      let level = 'Low occupancy';
      if(pct>=86){ level='High occupancy'; }
      else if(pct>=61){ level='Moderate occupancy'; }
      return {seated,total,pct,level};
    }
    function averageWaitAcrossQueue(){
      if (waitlist.length === 0) return 0;
      const mins = waitlist.map(w => estimateWaitForParty(w.size).minutes);
      return Math.round(mins.reduce((a,b)=> a+b, 0) / mins.length);
    }

    // ------------------------------
    // Auto-assign: EXACT size only
    // ------------------------------
    function assignPartiesToTables(){
      const now = Date.now();
      const freeTables = tables.filter(t =>
        !t.seated_at || expectedFreeTime(t).getTime() + t.cleaning_buffer*MIN_MS <= now
      );

      freeTables.forEach(t => {
        const idx = waitlist.findIndex(w => targetTableSize(w.size) === t.size);
        if (idx > -1){
          const party = waitlist.splice(idx,1)[0];
          if (seatPartyAtTable(party, t, /*allowFlex*/ false)) {
            toast(`Seated ${party.name} (party ${party.size}) at Table ${t.table_id}`);
          }
        } else {
          // mark truly free (if it just finished)
          if (t.seated_at && expectedFreeTime(t).getTime() + t.cleaning_buffer*MIN_MS <= now){
            t.seated_at = null;
            t.seated_party = null;
          }
        }
      });
    }

    // Simulate turnover occasionally (for demo only)
    function simulateTurnover(){
      const occupied = tables.filter(t=>t.seated_at);
      const count = Math.min(rand(1,3), occupied.length);
      const pick = occupied.sort(()=>Math.random()-.5).slice(0,count);
      pick.forEach(t=>{
        t.seated_at = new Date(Date.now() - (t.avg_turn_time + rand(0,5))*MIN_MS);
      });
      assignPartiesToTables();
      renderAll();
    }

    // ------------------------------
    // UI
    // ------------------------------
    function renderHero(){
      const occ = occupancyInfo();
      const occText = document.getElementById('occupancyText');
      const occSub = document.getElementById('occupancySub');
      const occArc = document.getElementById('occArc');
      const occPct = document.getElementById('occPct');
      const occLabel = document.getElementById('occLabel');
      const avgWaitEl = document.getElementById('avgWait');
      const nextReadyEl = document.getElementById('nextReady');
      const nextReadySub = document.getElementById('nextReadySub');
      const nextMetric = document.getElementById('nextTableMetric');
      const staffOn = document.getElementById('staffToggle').checked;

      if(nextMetric){ nextMetric.style.display = staffOn ? '' : 'none'; }

      occText.textContent = `${occ.seated} of ${occ.total} tables seated`;
      occSub.textContent = occ.level;

      const circumference = 2 * Math.PI * 52;
      const offset = circumference * (1 - occ.pct/100);
      occArc.style.strokeDashoffset = offset;
      occPct.textContent = `${occ.pct}%`;
      occLabel.textContent = occ.level;

      const color = occ.pct>=86? 'var(--danger)': occ.pct>=61? 'var(--warning)': 'var(--ok)';
      occPct.style.fill = color; occLabel.style.color = color;

      const avg = averageWaitAcrossQueue();
      avgWaitEl.textContent = avg>0 ? `${avg} min` : 'Now';

      const soonest = tables
        .map(t=>({id:t.table_id, freeAt: t.seated_at? expectedFreeTime(t): new Date(), size:t.size}))
        .sort((a,b)=> a.freeAt - b.freeAt)[0];
      if(soonest){
        const eta = Math.max(0, Math.round((soonest.freeAt - Date.now())/MIN_MS) + CLEANING_BUFFER_MIN);
        nextReadyEl.textContent = eta>0 ? `${eta} min` : 'Now';
        nextReadySub.textContent = `Table ${soonest.id} (~${soonest.size}) ready around ${fmtTime(soonest.freeAt)}`;
      }
    }

    function renderWaitlist(){
      const tbody = document.getElementById('waitlistRows');
      const headRow = document.getElementById('waitlistHeadRow');
      const staffOn = document.getElementById('staffToggle').checked;

      // Add/Remove Actions header based on staff view
      const existingActions = headRow.querySelector('.col-actions');
      if(staffOn && !existingActions){
        const th = document.createElement('th'); th.textContent='Actions'; th.className='col-actions'; headRow.appendChild(th);
      } else if(!staffOn && existingActions){
        headRow.removeChild(existingActions);
      }

      tbody.innerHTML = '';
      waitlist.forEach((w,i)=>{
        const est = estimateWaitForParty(w.size);
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${w.name}</td>
          <td><span class="pill">${ICON.users}${w.size}</span></td>
          <td>${fmtTime(w.addedAt)}</td>
          <td><span class="pill">${ICON.clock}${est.minutes > 0 ? `${est.minutes} min` : 'Now'}</span></td>
        `;
        if(staffOn){
          const td = document.createElement('td');
          td.innerHTML = `
            <button class="ghost" data-act="seat" data-i="${i}">Seat</button>
            <button class="ghost" data-act="remove" data-i="${i}">Remove</button>`;
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      });

      // Row actions
      tbody.onclick = (e)=>{
        const btn = e.target.closest('button'); if(!btn) return;
        const i = +btn.dataset.i; const w = waitlist[i]; if(!w) return;

        if(btn.dataset.act==='remove'){
          waitlist.splice(i,1); renderAll(); return;
        }

        if (btn.dataset.act === 'seat') {
          const allowFlex = e.altKey || e.shiftKey; // hold Alt/Option or Shift to override
          const candidates = tables.filter(t =>
            (!t.seated_at || expectedFreeTime(t) <= new Date()) &&
            canSeat(w.size, t.size, allowFlex)
          );
          if (candidates.length === 0){
            toast('No table available yet for party ' + w.size); return;
          }
          const t = candidates.sort((a,b)=> (expectedFreeTime(a) - expectedFreeTime(b)))[0];
          if (!seatPartyAtTable(w, t, allowFlex)) return;
          waitlist.splice(i,1);
          toast(`Seated ${w.name} (party ${w.size}) at Table ${t.table_id}${allowFlex ? ' (override)' : ''}`);
          renderAll();
        }
      };
    }

    function renderAdmin(){
      const overview = document.getElementById('adminOverview');
      const list = document.getElementById('tablesList');
      const upcoming = document.getElementById('upcomingList');

      const occ = occupancyInfo();
      overview.textContent = `${occ.seated} seated / ${occ.total-occ.seated} available • ${occ.pct}% occupied`;

      list.innerHTML = '';
      tables.forEach(t=>{
        const row = document.createElement('div');
        row.className = 'admin-row';
        const status = t.seated_at ? 'Seated' : 'Available';
        const remain = t.seated_at ? `${remainingDiningMin(t)} min left` : '—';
        row.innerHTML = `
          <div><span class="status-dot" style="background:${t.seated_at? 'var(--warning)':'var(--ok)'}"></span>
          <strong>Table ${t.table_id}</strong> • size ${t.size} • ${status}
          ${t.seated_party? `<span class="hint">(${t.seated_party.name}, party ${t.seated_party.size})</span>`:''}
          <span class="hint">(${remain})</span></div>
          <div>
            <button class="ghost" data-action="seat" data-id="${t.table_id}">Seat next</button>
            <button class="ghost" data-action="clear" data-id="${t.table_id}">Clear</button>
          </div>
        `;
        list.appendChild(row);
      });

      // Upcoming within 45 minutes
      const soon = tables
        .filter(t=> t.seated_at)
        .map(t=>({ id:t.table_id, size:t.size, at: new Date(expectedFreeTime(t).getTime() + t.cleaning_buffer*MIN_MS) }))
        .filter(x=> x.at - Date.now() <= 45*MIN_MS)
        .sort((a,b)=> a.at - b.at)
        .slice(0,8);
      upcoming.innerHTML = soon.length? soon.map(s=> `Table ${s.id} (~${s.size}) around ${fmtTime(s.at)}`).join('<br/>') : 'No tables expected soon';

      // Button handlers
      list.onclick = (e)=>{
        const btn = e.target.closest('button'); if(!btn) return;
        const id = +btn.dataset.id;
        const t = tables.find(x=>x.table_id===id);
        if(!t) return;

        if (btn.dataset.action === 'seat') {
          const allowFlex = e.altKey || e.shiftKey;
          const idx = waitlist.findIndex(w => canSeat(w.size, t.size, allowFlex));
          if (idx > -1) {
            const party = waitlist.splice(idx,1)[0];
            if (!seatPartyAtTable(party, t, allowFlex)) return;
            toast(`Seated ${party.name} (party ${party.size}) at Table ${id}${allowFlex ? ' (override)' : ''}`);
          } else {
            toast('No party fits this table yet');
          }
        }

        if(btn.dataset.action==='clear'){
          t.seated_at = null;
          t.seated_party = null;
          toast(`Cleared Table ${id}`);
        }

        assignPartiesToTables();
        renderAll();
      };
    }

    function renderAll(){
      document.getElementById('admin').classList.toggle('active', document.getElementById('staffToggle').checked);
      renderHero();
      renderWaitlist();
      renderAdmin();
    }

    // ------------------------------
    // Events
    // ------------------------------
    document.getElementById('joinForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = document.getElementById('guestName').value.trim();
      const contact = document.getElementById('guestContact').value.trim();
      const size = +document.getElementById('partySize').value;
      if(!name || !contact) return;
      waitlist.push({ name, contact, size, addedAt:new Date() });
      toast(`Added ${name} (party ${size}) to waitlist`);
      e.target.reset();
      renderAll();
    });
    document.getElementById('staffToggle').addEventListener('change', renderAll);

    // ------------------------------
    // Auto-update (demo)
    // ------------------------------
    function tick(){ assignPartiesToTables(); renderAll(); }
    setInterval(tick, 15000);                 // general updates
    setInterval(simulateTurnover, rand(60,120)*1000); // simulate some turnover

    // Initial render
    renderAll();

    // ------------------------------
    // Toast helper
    // ------------------------------
    function toast(msg){
      const el = document.getElementById('toast');
      el.textContent = msg;
      el.style.opacity = 1;
      clearTimeout(toast._t);
      toast._t = setTimeout(()=> el.style.opacity = 0, 1600);
    }
  </script>
</body>
</html>
